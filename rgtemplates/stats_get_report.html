{% extends "base.html" %}

{% block title %}School Visit Stats reporting{% endblock %}

{% block pagetitle %}School Visit Stats reporting{% endblock %}

{% block content %}
<form action="/reports/" method="post">
        <fieldset style="margin-right: 20px;">
                <legend>Filters</legend>
                        {% if theform.errors %}
                                <span class="alert">{{ theform.errors }}</span>
                        {% endif %}
                        <div>
                                <label class="label-left" style="width:120px;" for="id_{{ theform.start_date.name }}">{{ theform.start_date.label }}</label>
                                {{ theform.start_date }} {{ theform.start_time }}
                        </div>
                        <div>
                                <label class="label-left" style="width:120px;" for="id_{{ theform.end_date.name }}">{{ theform.end_date.label }}</label>
                                {{ theform.end_date }} {{ theform.end_time }}
                        </div>
                        <input type="submit" value="Fetch Report">
        </fieldset>
</form>
{% if totals %}
<p><strong>Total visits with recorded stats:</strong> {{ totals.events }} </p>
<p><strong>Schools taught at:</strong> {{ totals.schools_count }} </p>
<p><strong>Students taught:</strong>
    <table width="400px" style="table-layout:fixed;  text-align:center;" cellpadding="5" border="1" rules="NONE" frame="BOX" cellspacing="0">
		<col width="100px" />
		<col width="150px" />
		<col width="150px" />
		<tr class="odd">
			<td></td>
			<td>Girls</td>
			<td>Boys</td>
		</tr>
	</table>
	<table width="400px" style="table-layout:fixed; text-align: center;" cellpadding="5" border="1" rules="NONE" frame="BOX" cellspacing="0">
		<col width="100px" />
		<col width="75px" />
		<col width="75px" />
		<col width="75px" />
		<col width="75px" />
		<tr class="even" style="">
			<td></td>
			<td>First</td>
			<td>Repeat</td>
			<td>First</td>
			<td>Repeat</td>
		</tr>
		<tr class="odd">
			<td>Primary School</td>
			<td>{{ totals.pgf }}</td>
			<td>{{ totals.pgr }}</td>
			<td>{{ totals.pbf }}</td>
			<td>{{ totals.pbr }}</td>
		</tr>
		<tr class="even">
			<td>High School</td>
			<td>{{ totals.hgf }}</td>
			<td>{{ totals.hgr }}</td>
			<td>{{ totals.hbf }}</td>
			<td>{{ totals.hbr }}</td>
		</tr>
		<tr class="odd">
			<td>Other</td>
			<td>{{ totals.ogf }}</td>
			<td>{{ totals.ogr }}</td>
			<td>{{ totals.obf }}</td>
			<td>{{ totals.obr }}</td>
		</tr>
	</table>
{% endif %}
{% endblock %}